<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>~$ automaton by shellfu</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>~$ automaton</h1>
        <h2>automaton is a lightweight external node classifier for puppet that supports multiple data backends. It has a simple command line interface, as well as an optional REST interface. </h2>

        <section id="downloads">
          <a href="https://github.com/shellfu/automaton/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/shellfu/automaton/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/shellfu/automaton" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p><a href="https://codeclimate.com/github/shellfu/automaton"><img src="https://codeclimate.com/github/shellfu/automaton.png" alt="Code Climate"></a></p>

<h1>
<a name="-what-is-automaton" class="anchor" href="#-what-is-automaton"><span class="octicon octicon-link"></span></a>~$ what is automaton</h1>

<hr><p>automaton is a lightweight external node classifier for puppet that supports multiple data backends. It has a simple command line interface, as well as an optional REST interface. automaton is written in ruby, and authored by shellfu, just another unix admin out there.</p>

<h4>
<a name="-features" class="anchor" href="#-features"><span class="octicon octicon-link"></span></a>~$ features</h4>

<ul>
<li>command-line interface</li>
<li>rest interface</li>
<li>multi-node inheritance</li>
<li>parameterized classes</li>
<li>node fact storage via puppet's inventory service</li>
<li>facter fact interpolation</li>
<li>easy configuration via yaml</li>
<li>db or flat file storage

<ul>
<li>mongodb</li>
<li>yaml</li>
</ul>
</li>
</ul><h4>
<a name="-roadmap" class="anchor" href="#-roadmap"><span class="octicon octicon-link"></span></a>~$ roadmap</h4>

<ul>
<li>configurable metadata storage (to be a bolt on/plugin)</li>
<li>documentation on writing a backend</li>
</ul><h4>
<a name="-installation" class="anchor" href="#-installation"><span class="octicon octicon-link"></span></a>~$ installation</h4>

<p>for detailed installation instructions please proceed to the &gt;<a href="https://github.com/shellfu/automaton/blob/master/INSTALL.markdown">install.markdown</a>&lt; file in the automaton github repository.</p>

<h2>
<a name="-usage" class="anchor" href="#-usage"><span class="octicon octicon-link"></span></a>~$ usage</h2>

<p>Both command-line and rest interfaces have very similar formats to make it easy to remember. Take note of the below delimiters when adding class parameters or top level parameters. You may add or update one class or parameter at a time or multiple additions as per below. </p>

<p>The delimiters for classes and parameters is a &gt;<strong>,</strong>&lt;(comma). While the delimiter for class parameters is a &gt;<strong>^</strong>&lt;(carrot). This is the format for command-line and rest interfaces:</p>

<ul>
<li>for class parameters you specify like: <strong>class1^parameter=value,class2,class3</strong>
</li>
<li>for top parameters you specify like:   <strong>key=value,key1=value</strong>
</li>
</ul><h3>
<a name="-additions" class="anchor" href="#-additions"><span class="octicon octicon-link"></span></a>~$ additions</h3>

<p>Let's add a default node definition, add the timezone class, set the timezone class parameter. As well as setting the environment. </p>

<div class="highlight highlight-bash"><pre>shellfu@puppetmaster:~<span class="nv">$ </span>automaton add -n default -c timezone^timezone<span class="o">=</span>Europe/Berlin -e production
I, INFO -- : Node &gt;default&lt; added to the ENC.
shellfu@puppetmaster:~<span class="nv">$ </span>automaton lookup -n default
---
environment: production
classes:
  timezone:
    timezone: Europe/Berlin
parameters:
</pre></div>

<h3>
<a name="-updates" class="anchor" href="#-updates"><span class="octicon octicon-link"></span></a>~$ updates</h3>

<p>Say you forgot to add something or you need to update a node. We will update the default node and add classes &gt;<strong>foo</strong>&lt; and &gt;<strong>bar</strong>&lt; as well as top scope parameter &gt;myparameter**&lt;.</p>

<div class="highlight highlight-bash"><pre>shellfu@puppetmaster:~<span class="nv">$ </span>automaton update -n default -c foo,bar -p <span class="nv">myparameter</span><span class="o">=</span>myvalue
I, INFO -- : Node &gt;default&lt; Updated.
shellfu@puppetmaster:~<span class="nv">$ </span>automaton lookup -n default
---
environment: production
classes:
  timezone:
    timezone: Europe/Berlin
  foo: 
  bar: 
parameters:
  myparameter: myvalue
</pre></div>

<h3>
<a name="-removals" class="anchor" href="#-removals"><span class="octicon octicon-link"></span></a>~$ removals</h3>

<p>Removing a class, parameter or class parameter is as easy as additions or updates save one difference. You cannot remove multiple classes, multiple parameters or multiple class parameters. You can remove a class and a top scope parameter at the same time however.</p>

<p>Taking the following node definition we've been working with, let's remove class foo's class parameter, but before we do we will take a quick look at the definition as it stands.</p>

<div class="highlight highlight-bash"><pre>shellfu@puppetmaster:~<span class="nv">$ </span>automaton lookup -n default
---
environment: production
classes:
  timezone:
    timezone: Europe/Berlin
  foo:
    fooparam: value 
  bar: 
parameters:
  myparameter: myvalue
</pre></div>

<p>Now for the actual removal, followed by another lookup on the node definition to see the result:</p>

<div class="highlight highlight-bash"><pre>shellfu@puppetmaster:~<span class="nv">$ </span>automaton remove -n default -c foo^fooparam
I, INFO -- : Removed item from &gt;default&lt; in the ENC
shellfu@puppetmaster:~<span class="nv">$ </span>automaton lookup -n default
---
environment: production
classes:
  timezone:
    timezone: Europe/Berlin
  foo:
  bar: 
parameters:
  myparameter: myvalue

<span class="c">##### ~$ contributing</span>
<span class="k">if </span>you wish to contribute to automaton just send a pull request over. 

<span class="c">###### shameless plug [shellfu&lt;dot&gt;com](http://www&lt;dot&gt;shellfu&lt;dot&gt;com)</span>
</pre></div>
      </section>
    </div>

    
  </body>
</html>