{"name":"~$ automaton","tagline":"automaton is a lightweight external node classifier for puppet that supports multiple data backends. It has a simple command line interface, as well as an optional REST interface. ","body":"[![Code Climate](https://codeclimate.com/github/shellfu/automaton.png)](https://codeclimate.com/github/shellfu/automaton)\r\n\r\n# ~$ what is automaton\r\n* * *\r\nautomaton is a lightweight external node classifier for puppet that supports multiple data backends. It has a simple command line interface, as well as an optional REST interface. automaton is written in ruby, and authored by shellfu, just another unix admin out there.\r\n\r\n#### ~$ features\r\n* command-line interface\r\n* rest interface\r\n* multi-node inheritance\r\n* parameterized classes\r\n* node fact storage via puppet's inventory service\r\n* facter fact interpolation\r\n* easy configuration via yaml\r\n* db or flat file storage\r\n    * mongodb\r\n    * yaml\r\n    * json\r\n\r\n#### ~$ roadmap \r\n* configurable metadata storage (to be a bolt on/plugin)\r\n* documentation on writing a backend\r\n\r\n#### ~$ installation        \r\nfor detailed installation instructions please proceed to the >[install.markdown](https://github.com/shellfu/automaton/blob/master/INSTALL.markdown)< file in the automaton github repository.\r\n       \r\n## ~$ usage\r\n* * *\r\nBoth command-line and rest interfaces have very similar formats to make it easy to remember. Take note of the below delimiters when adding class parameters or top level parameters. You may add or update one class or parameter at a time or multiple additions as per below. \r\n\r\nThe delimiters for classes and parameters is a >**,**<(comma). While the delimiter for class parameters is a >**^**<(carrot). This is the format for command-line and rest interfaces:\r\n* for class parameters you specify like: **class1^parameter=value,class2,class3**\r\n* for top parameters you specify like:   **key=value,key1=value**\r\n\r\n### ~$ additions\r\nLet's add a default node definition, add the timezone class, set the timezone class parameter. As well as setting the environment. \r\n```bash\r\nshellfu@puppetmaster:~$ automaton add -n default -c timezone^timezone=Europe/Berlin -e production\r\nI, INFO -- : Node >default< added to the ENC.\r\nshellfu@puppetmaster:~$ automaton lookup -n default\r\n---\r\nenvironment: production\r\nclasses:\r\n  timezone:\r\n    timezone: Europe/Berlin\r\nparameters:\r\n```\r\n\r\n### ~$ updates\r\nSay you forgot to add something or you need to update a node. We will update the default node and add classes >**foo**< and >**bar**< as well as top scope parameter >//myparameter**<.\r\n```bash\r\nshellfu@puppetmaster:~$ automaton update -n default -c foo,bar -p myparameter=myvalue\r\nI, INFO -- : Node >default< Updated.\r\nshellfu@puppetmaster:~$ automaton lookup -n default\r\n---\r\nenvironment: production\r\nclasses:\r\n  timezone:\r\n    timezone: Europe/Berlin\r\n  foo: \r\n  bar: \r\nparameters:\r\n  myparameter: myvalue\r\n```\r\n\r\n### ~$ removals\r\nRemoving a class, parameter or class parameter is as easy as additions or updates save one difference. You cannot remove multiple classes, multiple parameters or multiple class parameters. You can remove a class and a top scope parameter at the same time however.\r\n\r\nTaking the following node definition we've been working with, let's remove class foo's class parameter, but before we do we will take a quick look at the definition as it stands.\r\n```bash\r\nshellfu@puppetmaster:~$ automaton lookup -n default\r\n---\r\nenvironment: production\r\nclasses:\r\n  timezone:\r\n    timezone: Europe/Berlin\r\n  foo:\r\n    fooparam: value \r\n  bar: \r\nparameters:\r\n  myparameter: myvalue\r\n```\r\n   \r\n\r\nNow for the actual removal, followed by another lookup on the node definition to see the result:\r\n```bash\r\nshellfu@puppetmaster:~$ automaton remove -n default -c foo^fooparam\r\nI, INFO -- : Removed item from >default< in the ENC\r\nshellfu@puppetmaster:~$ automaton lookup -n default\r\n---\r\nenvironment: production\r\nclasses:\r\n  timezone:\r\n    timezone: Europe/Berlin\r\n  foo:\r\n  bar: \r\nparameters:\r\n  myparameter: myvalue\r\n```\r\n* * *\r\n##### ~$ contributing\r\nif you wish to contribute to automaton just send a pull request over. \r\n\r\n###### shameless plug [shellfu<dot>com](http://www<dot>shellfu<dot>com)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}